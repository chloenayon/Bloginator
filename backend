import os, sqlite3, csv, random 

db_name = "memberData.db"

#initializes members database, if file already exists does nothing, this way I don't have to write separate files

def init():

    if (not os.path.exists(db_name)):

        conn = sqlite3.connect(db_name)
        c = conn.cursor()

        q = """create table members (user text, pwd text, id integer);"""
        c.execute(q)

        q = """insert into members values ("Theo", "TheO", 200);"""
        c.execute(q)

        conn.commit()

#outputs all the members' info

def check():
    conn = sqlite3.connect(db_name)
    c = conn.cursor()
    x = """SELECT * FROM members"""
    res = c.execute(x)
    for r in res:
        print r

#adds a member, takes username and password for parameters
def addMember(u, p):
    conn = sqlite3.connect(db_name)
    c = conn.cursor()
    i = iterate()
    q = """insert into members values ("%s","%s",%i);"""
    q = q%(u,p,i)
    c.execute(q)
    conn.commit()
    
#generates a random number for member id    
def iterate():
    q = """select id from members;"""
    num = random.randint(100,999)
    for a in q:
        if num == a:
            iterate()
    return num    

#checks username and corresponding password, returns a boolean
def checkpassword(uname, passwd):
    conn = sqlite3.connect(db_name)
    c = conn.cursor()
#    q = """ select pwd from members where user = "%s" """ 
#    q = q%(uname)

    q = "select * from members;"

    for line in c.execute(q):
        print line

    return "false"
#        if line == passwd:
#            return true
#        else:
#            return false

#check()

